!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("@ionic/angular"),require("@ionic/Storage"),require("rxjs")):"function"==typeof define&&define.amd?define("broker-lib",["exports","@angular/core","@angular/common/http","@ionic/angular","@ionic/Storage","rxjs"],e):e((t=t||self)["broker-lib"]={},t.ng.core,t.ng.common.http,t.angular,t.Storage,t.rxjs)}(this,function(t,e,i,o,n,r){"use strict";var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function s(t,e,i,o){return new(i||(i=Promise))(function(n,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})}function c(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var l=function(){function t(){this.baseAppUrl="http://89.31.75.45:443/Spring-JPA-Security",this.tokenHeaderKey="Authorization",this.pathSeparator="/",this.loginServiceName="login",this.cambioPasswordServiceName="putPassword",this.getImmobiliServiceName="getImmobili",this.getImmobileServiceName="getImmobile",this.putImmobileServiceName="putImmobile",this.delImmobileServiceName="delimmobile",this.getCatastoServiceName="getcatasto",this.getPianoAmmortamentoServiceName="getPiano",this.getClientiServiceName="getClienti",this.putClientiServiceName="putCliente",this.abilitaAppClienteServiceName="appcliente",this.bookValueServiceName="getBookValue",this.pianoAmmortamentoServiceName="getpiano",this.situazioneGeneraleServiceName="getSituazione",this.graficiServiceName="getgrafici",this.pdfReportServiceName="getpdfreport",this.postErroreServiceName="writeLog",this.getDropdownServiceName="get_dropdown",this.tipologiaImmobileVilla="villa",this.tipologiaImmobileCasa="casa",this.tipologiaImmobileAgricolo="agricolo",this.tipologiaImmobileUfficio="ufficio",this.tipologiaImmobileAlbergo="albergo",this.tipologiaImmobileOspedale="ospedale",this.tipologiaImmobileScuola="scuola",this.tipologiaImmobileMuseo="museo",this.tipologiaImmobileChiesa="chiesa",this.tipologiaImmobileMagazzino="magazzino",this.tipologiaImmobileNegozio="negozio",this.tipologiaImmobileSport="sport",this.tipologiaImmobileGarage="garage",this.tipologiaImmobileFabbrica="fabbrica",this.tipologiaImmobileTeatro="teatro",this.tipologiaImmobileBanca="banca",this.tipologiaImmobilePonte="ponte",this.tipologiaImmobileStazione="stazione",this.tipologiaImmobileCantiere="cantiere"}return t.decorators=[{type:e.Injectable}],t}();var p=function(){function t(t,e,o){this.http=t,this.constants=e,this.backEnd=o,this.httpClientLogin=new i.HttpClient(this.backEnd)}return t.prototype.get=function(t){return this.http.get(this.constants.baseAppUrl+"/"+t)},t.prototype.getNoToken=function(t){return console.log("HttpService get "+t),this.httpClientLogin.get(this.constants.baseAppUrl+"/"+t)},t.prototype.post=function(t,e){return this.http.post(this.constants.baseAppUrl+"/"+t,e)},t.prototype.postNoToken=function(t,e){return console.log("HttpService post "+t),this.httpClientLogin.post(this.constants.baseAppUrl+"/"+t,e)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:i.HttpClient},{type:l},{type:i.HttpBackend}]},t}();var u=function(){};var h=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.postErrore=function(t){return this.httpService.post(this.constants.postErroreServiceName,t)},t.prototype.generateErrorMessage=function(t){var e=new u;return e.log_descrerr=t.msg_testo,e.log_stacktrace=t.msg_techdata,e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p},{type:l}]},t}();var m=function(){function t(t){this.alertController=t}return t.prototype.presentAlert=function(t){return s(this,void 0,void 0,function(){return c(this,function(e){return this.alertController.create({header:"Conferma",message:t,buttons:["OK"]}).then(function(t){t.present()}),[2]})})},t.prototype.presentErrorAlert=function(t){return s(this,void 0,void 0,function(){return c(this,function(e){return this.alertController.create({header:"Errore",message:t,buttons:["CHIUDI"]}).then(function(t){t.present()}),[2]})})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.AlertController}]},t}();var g=function(){};var f=function(){function t(t){this.storage=t,this.USERKEY="user",this.wsToken=null}return t.prototype.clearUserData=function(){this.storage.clear(),this.wsToken=null},t.prototype.setUserData=function(t){return console.log("setUserData"),this.wsToken=t,null==t?-1:(this.storage.set(this.USERKEY,t).then(function(t){console.log(t)}),1)},t.prototype.getUserDataPromise=function(){var t=this;return new Promise(function(e){null==t.wsToken?t.storage.get(t.USERKEY).then(function(i){console.log(i),null!=i?e(i):(console.log("necessario login"),t.setUserData(null),t.wsToken=null,e(null))}):e(t.wsToken)})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.Storage}]},t}();var b=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getImmobili=function(t){return this.httpService.get(this.constants.getImmobiliServiceName+this.constants.pathSeparator+t)},t.prototype.getImmobile=function(t){return this.httpService.get(this.constants.getImmobileServiceName+this.constants.pathSeparator+t)},t.prototype.putImmobile=function(t){return this.httpService.post(this.constants.putImmobileServiceName,t)},t.prototype.delImmobile=function(t){return this.httpService.post(this.constants.delImmobileServiceName,t)},t.prototype.invioDatiCatastali=function(t){return this.httpService.get(this.constants.getCatastoServiceName+this.constants.pathSeparator+t)},t.prototype.getPianoAmmortamentoImmobile=function(t){return this.httpService.get(this.constants.getPianoAmmortamentoServiceName+this.constants.pathSeparator+t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p},{type:l}]},t}();var v=function(){};var d=function(){};var S=function(){function t(t,e){this.storeService=t,this.immobiliService=e,this.immobile=void 0,this.elencoImmobiliSubject=new r.Subject,this.elencoImmobiliObs=this.elencoImmobiliSubject.asObservable(),this.userDataSubject=new r.Subject,this.userDataObservable=this.userDataSubject.asObservable(),this.userData=new g,this.connection=new d,this.cliente=new v}return t.prototype.setCliente=function(t){var e=this;this.cliente=t,this.immobiliService.getImmobili(this.cliente.cliente_id+"").subscribe(function(t){t.Success&&(e.immobiliCliente=t.Data.elenco_immobili,e.elencoImmobiliSubject.next(!0))})},t.prototype.clearUserData=function(){this.storeService.clearUserData(),this.userData=new g},t.prototype.setUserData=function(t){return this.userData=t,null==t?-1:(this.storeService.setUserData(t),1)},t.prototype.getUserData=function(){return this.userData},t.prototype.loadUserData=function(){var t=this;null!==this.userData&&void 0!==this.userData&&""===this.userData.token_value?this.userDataSubject.next(!0):this.storeService.getUserDataPromise().then(function(e){null==e?t.userDataSubject.next(!1):(t.userData=e,t.userDataSubject.next(!0))})},t.prototype.getCliente=function(){return this.cliente},t.prototype.getImmobiliCliente=function(){return this.immobiliCliente},t.prototype.setImmobileDettaglio=function(t){this.immobile=t},t.prototype.getImmobileDettaglio=function(){return this.immobile},t.prototype.clearImmobileDettaglio=function(){this.immobile=null},t.prototype.setConnection=function(t){this.connection=t},t.prototype.getConnection=function(){return this.connection},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:f},{type:b}]},t}();var y=function(){function t(t,e,i,o,n){this.injector=t,this.zone=e,this.logErroriService=i,this.alertService=o,this.sessionService=n}return t.prototype.handleError=function(t){var e=this,i=this.sessionService.getUserData().token_value;console.log("gestisco un errore");var o=new u;o.token=i,o.log_stacktrace=JSON.stringify(t),o.log_descrerr=t.message,o.log_metodoerr="",o.log_link="",o.log_query="",o.username="",this.logErroriService.postErrore(o).subscribe(function(i){console.log("errore trasmesso: "+o),e.alertService.presentErrorAlert("Errore "+t.message+" trasmesso al server")}),console.log("gestione errore completata")},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:e.NgZone},{type:h},{type:m},{type:S}]},t}();var I=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getClienti=function(){return this.httpService.get(this.constants.getClientiServiceName)},t.prototype.putCliente=function(t){return this.httpService.post(this.constants.putClientiServiceName,t)},t.prototype.abilitaAppCliente=function(t){return this.httpService.post(this.constants.abilitaAppClienteServiceName,t)},t.prototype.getBookValue=function(t){return this.httpService.get(this.constants.bookValueServiceName+this.constants.pathSeparator+t)},t.prototype.getPianoAmmortamento=function(t){return this.httpService.get(this.constants.pianoAmmortamentoServiceName+this.constants.pathSeparator+t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p},{type:l}]},t}();var C=function(){function t(t,e){this.httpService=t,this.constants=e,this.tipologieTasse=[{codice:0,descrizione:""},{codice:1,descrizione:"tasse1"},{codice:2,descrizione:"tasse2"},{codice:3,descrizione:"tasse3"}],this.tipiAffittuario=[{codice:0,descrizione:""},{codice:1,descrizione:"tipoAffittuario1"},{codice:2,descrizione:"tipoAffittuario2"},{codice:3,descrizione:"tipoAffittuario3"}],this.euribor=[{codice:0,descrizione:""},{codice:1,descrizione:"euribor1"},{codice:2,descrizione:"euribor2"},{codice:3,descrizione:"euribor3"}],this.tipiOmi=[{codice:0,descrizione:""},{codice:1,descrizione:"omi1"},{codice:2,descrizione:"omi2"},{codice:3,descrizione:"omi3"},{codice:4,descrizione:"omi4"},{codice:5,descrizione:"omi5"}]}return t.prototype.getTipologieTasse=function(){return this.tipologieTasse},t.prototype.getTipiAffittuari=function(){return this.tipiAffittuario},t.prototype.getEuribor=function(){return this.euribor},t.prototype.getTipiOmi=function(t){return this.tipiOmi},t.prototype.getDropdown=function(t,e,i,o,n,r){var a="/"+t+"/"+e+"/"+i+"/"+o+"/"+n+"/"+r;return this.httpService.get(this.constants.getDropdownServiceName+a)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p},{type:l}]},t}();var D=function(){function t(t){this.constants=t,this.tipologiaVilla=["A/1","A/7","A/8","A/9"],this.tipologiaCasa=["A/2","A/3","A/4","A/5","A/11"],this.tipologiaAgricolo=["A/6","D/10"],this.tipologiaUfficio=["A/10","C/3","E/3","E/4","E/6","E/8","E/9","F/1","F/2"],this.tipologiaAlbergo=["B/1","B/3","C/5","D/2"],this.tipologiaOspedale=["B/2","D/4"],this.tipologiaScuola=["B/5"],this.tipologiaMuseo=["B/6"],this.tipologiaChiesa=["B/7","E/7"],this.tipologiaMagazzino=["B/8","C/2","E/5","F/5"],this.tipologiaNegozio=["C/1","D/8"],this.tipologiaSport=["C/4","D/6"],this.tipologiaGarage=["C/6","C/7"],this.tipologiaFabbrica=["D/1","D/7"],this.tipologiaTeatro=["D/3"],this.tipologiaBanca=["D/5"],this.tipologiaPonte=["D/9","E/2"],this.tipologiaStazione=["E/1"],this.tipologiaCantiere=["F/3","F/4","F/6"]}return t.prototype.getClasseIcona=function(t){return this.tipologiaAgricolo.includes(t)?this.constants.tipologiaImmobileAgricolo:this.tipologiaAlbergo.includes(t)?this.constants.tipologiaImmobileAlbergo:this.tipologiaBanca.includes(t)?this.constants.tipologiaImmobileBanca:this.tipologiaCantiere.includes(t)?this.constants.tipologiaImmobileCantiere:this.tipologiaCasa.includes(t)?this.constants.tipologiaImmobileCasa:this.tipologiaChiesa.includes(t)?this.constants.tipologiaImmobileChiesa:this.tipologiaFabbrica.includes(t)?this.constants.tipologiaImmobileFabbrica:this.tipologiaGarage.includes(t)?this.constants.tipologiaImmobileGarage:this.tipologiaMagazzino.includes(t)?this.constants.tipologiaImmobileMagazzino:this.tipologiaMuseo.includes(t)?this.constants.tipologiaImmobileMuseo:this.tipologiaNegozio.includes(t)?this.constants.tipologiaImmobileNegozio:this.tipologiaOspedale.includes(t)?this.constants.tipologiaImmobileOspedale:this.tipologiaPonte.includes(t)?this.constants.tipologiaImmobilePonte:this.tipologiaScuola.includes(t)?this.constants.tipologiaImmobileScuola:this.tipologiaSport.includes(t)?this.constants.tipologiaImmobileSport:this.tipologiaStazione.includes(t)?this.constants.tipologiaImmobileStazione:this.tipologiaTeatro.includes(t)?this.constants.tipologiaImmobileTeatro:this.tipologiaUfficio.includes(t)?this.constants.tipologiaImmobileUfficio:this.tipologiaVilla.includes(t)?this.constants.tipologiaImmobileVilla:this.constants.tipologiaImmobileCasa},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:l}]},t}();var A=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:e.NgModule,args:[{declarations:[],imports:[i.HttpClientModule,n.IonicStorageModule.forRoot()],providers:[l,p,b,I,C,h,y,D],exports:[]}]}],t}(),z=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getSituazioneGenerale=function(t){return this.httpService.get(this.constants.situazioneGeneraleServiceName+this.constants.pathSeparator+t)},t.prototype.getGrafici=function(t){return this.httpService.get(this.constants.graficiServiceName+this.constants.pathSeparator+t)},t.prototype.getPdfReport=function(t){return this.httpService.get(this.constants.pdfReportServiceName+this.constants.pathSeparator+t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p},{type:l}]},t}();var N=function(){function t(t,e,i){this.httpService=t,this.storeService=e,this.constants=i}return t.prototype.CambioPassword=function(t){return this.httpService.post(this.constants.cambioPasswordServiceName,t)},t.prototype.Login=function(t){return this.httpService.postNoToken(this.constants.loginServiceName,t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p},{type:f},{type:l}]},t}();var w=function(){};var P=function(){};var E=function(){};var j=function(){};var k=function(){};var U=function(){};var _=function(){};var T=function(){};var O=function(){};var R=function(){};var G=function(){};var M=function(){};var x=function(){};var B=function(){};var q=function(){};var F=function(){};var L=function(){};var V=function(){};var H=function(){};var K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(H);var Y=function(){};var J=function(){};var W=function(){};var Z=function(){};var Q=function(){};var X=function(){};var $=function(){};var tt=function(){};var et=function(){};var it=function(){};var ot=function(){};var nt=function(){};t.AbilitaAppClienteRequest=R,t.AffittoDettaglio=q,t.AlertService=m,t.AnnoPianoAmmortamento=$,t.BookValue=G,t.BrokerLibModule=A,t.CambioPasswordRequest=it,t.CancellazioneImmobileRequest=F,t.Cliente=v,t.ClientiService=I,t.CointestatarioDettaglio=L,t.DatiCatastaliDettaglio=V,t.DdlItem=nt,t.DropdownService=C,t.ErrorHandlerService=y,t.ErrorMessage=ot,t.Grafici=w,t.GraficiAffittuario=P,t.GraficiAndamentoAnnuale=E,t.GraficiConcentrazione=j,t.GraficiIndicatore=k,t.IconeService=D,t.Immobile=B,t.ImmobileDettaglio=H,t.ImmobileDettaglioVM=K,t.ImmobiliService=b,t.InserimentoClienteRequest=M,t.InserimentoClienteResponse=x,t.InserimentoImmobileResponse=Y,t.LogErroriService=h,t.LoginRequest=tt,t.LoginService=N,t.MutuoDettaglio=J,t.OmiDettaglio=W,t.PianoAmmortamento=X,t.ReportGenerale=U,t.ReportGeneraleAttivo=_,t.ReportGeneraleOggettoColonna=O,t.ReportGeneralePassivo=T,t.ReportService=z,t.SessionService=S,t.SpesaDettaglio=Z,t.StoreService=f,t.TassaDettaglio=Q,t.Utente=et,t.WsLogErrore=u,t.WsToken=g,t.ɵa=l,t.ɵb=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=broker-lib.umd.min.js.map