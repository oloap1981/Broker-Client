!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("@ionic/angular"),require("@ionic/Storage"),require("rxjs"),require("@angular/router")):"function"==typeof define&&define.amd?define("broker-lib",["exports","@angular/core","@angular/common/http","@ionic/angular","@ionic/Storage","rxjs","@angular/router"],e):e((t=t||self)["broker-lib"]={},t.ng.core,t.ng.common.http,t.angular,t.Storage,t.rxjs,t.ng.router)}(this,function(t,e,i,o,n,r,a){"use strict";var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function c(t,e,i,o){return new(i||(i=Promise))(function(n,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})}function l(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var p=function(){function t(){this.baseAppUrl="http://89.31.75.45:443/Spring-JPA-Security",this.tokenHeaderKey="Authorization",this.pathSeparator="/",this.loginServiceName="login",this.cambioPasswordServiceName="putPassword",this.getImmobiliServiceName="getimmobili",this.getImmobileServiceName="getimmobile",this.putImmobileServiceName="putimmobile",this.delImmobileServiceName="delimmobile",this.getCatastoServiceName="getcatasto",this.getPianoAmmortamentoServiceName="getPiano",this.getClientiServiceName="getclienti",this.putClientiServiceName="putcliente",this.abilitaAppClienteServiceName="appcliente",this.bookValueServiceName="getbookvalue",this.pianoAmmortamentoServiceName="getpiano",this.situazioneGeneraleServiceName="getsituazione",this.graficiServiceName="getgrafici",this.pdfReportServiceName="getpdfreport",this.postErroreServiceName="writeLog",this.getDropdownServiceName="get_dropdown",this.tipologiaImmobileVilla="villa",this.tipologiaImmobileCasa="casa",this.tipologiaImmobileAgricolo="agricolo",this.tipologiaImmobileUfficio="ufficio",this.tipologiaImmobileAlbergo="albergo",this.tipologiaImmobileOspedale="ospedale",this.tipologiaImmobileScuola="scuola",this.tipologiaImmobileMuseo="museo",this.tipologiaImmobileChiesa="chiesa",this.tipologiaImmobileMagazzino="magazzino",this.tipologiaImmobileNegozio="negozio",this.tipologiaImmobileSport="sport",this.tipologiaImmobileGarage="garage",this.tipologiaImmobileFabbrica="fabbrica",this.tipologiaImmobileTeatro="teatro",this.tipologiaImmobileBanca="banca",this.tipologiaImmobilePonte="ponte",this.tipologiaImmobileStazione="stazione",this.tipologiaImmobileCantiere="cantiere",this.getDdlEuribor="get_ddl_tipo_euribor",this.getDdlAffittuari="get_ddl_tipo_affittuari",this.getDdlTasse="get_ddl_tasse",this.getDdlOmi="get_ddl_omi",this.getDdlTipologiaCatastale="get_ddl_tipologia_catastale"}return t.decorators=[{type:e.Injectable}],t}();var u=function(){function t(t,e,o){this.http=t,this.constants=e,this.backEnd=o,this.httpClientLogin=new i.HttpClient(this.backEnd)}return t.prototype.get=function(t){return this.http.get(this.constants.baseAppUrl+"/"+t)},t.prototype.getNoToken=function(t){return console.log("HttpService get "+t),this.httpClientLogin.get(this.constants.baseAppUrl+"/"+t)},t.prototype.post=function(t,e){return this.http.post(this.constants.baseAppUrl+"/"+t,e)},t.prototype.postNoToken=function(t,e){return console.log("HttpService post "+t),this.httpClientLogin.post(this.constants.baseAppUrl+"/"+t,e)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:i.HttpClient},{type:p},{type:i.HttpBackend}]},t}();var h=function(){};var m=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.postErrore=function(t){return this.httpService.post(this.constants.postErroreServiceName,t)},t.prototype.generateErrorMessage=function(t){var e=new h;return e.log_descrerr=t.msg_testo,e.log_stacktrace=t.msg_techdata,e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u},{type:p}]},t}();var g=function(){};var f=function(){function t(t){this.storage=t,this.USERKEY="user",this.wsToken=null}return t.prototype.clearUserData=function(){this.storage.clear(),this.wsToken=null},t.prototype.setUserData=function(t){return console.log("setUserData"),this.wsToken=t,null==t?-1:(this.storage.set(this.USERKEY,t).then(function(t){console.log(t)}),1)},t.prototype.getUserDataPromise=function(){var t=this;return new Promise(function(e){null==t.wsToken?t.storage.get(t.USERKEY).then(function(i){console.log(i),null!=i?e(i):(console.log("necessario login"),t.setUserData(null),t.wsToken=null,e(null))}):e(t.wsToken)})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.Storage}]},t}();var b=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getImmobili=function(t){return this.httpService.get(this.constants.getImmobiliServiceName+this.constants.pathSeparator+t)},t.prototype.getImmobile=function(t){return this.httpService.get(this.constants.getImmobileServiceName+this.constants.pathSeparator+t)},t.prototype.putImmobile=function(t){return this.httpService.post(this.constants.putImmobileServiceName,t)},t.prototype.delImmobile=function(t){return this.httpService.post(this.constants.delImmobileServiceName,t)},t.prototype.invioDatiCatastali=function(t){return this.httpService.get(this.constants.getCatastoServiceName+this.constants.pathSeparator+t)},t.prototype.getPianoAmmortamentoImmobile=function(t){return this.httpService.get(this.constants.getPianoAmmortamentoServiceName+this.constants.pathSeparator+t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u},{type:p}]},t}();var d=function(){};var v=function(){this.proprieta_id=0,this.codice_fiscale="",this.codice_tipologia="",this.descrizione_tipologia="",this.data_aggiornamento=0,this.valore_acquisto=0,this.quota=0,this.catastale_cod="",this.comune_zone_cod="",this.indirizzo="",this.civico="",this.citta="",this.cap="",this.provincia="",this.istat_cod="",this.latitudine="",this.longitudine="",this.prima_casa=!1,this.destinazione_uso_id=0,this.descrizione_uso="",this.mutuo=!1,this.affitto=!1};var S=function(){};var y=function(){this.proprieta_catasto_id=0,this.sezione="",this.foglio="",this.zona="",this.micro_zona="",this.particella="",this.subalterno="",this.categoria="",this.classe="",this.rendita=0,this.vani="",this.superficie_interni=0,this.superficie_totale=0};var _=function(){this.valore_omi=0,this.valore_pot=0,this.affitto_pot=0,this.ammortamento_decadenza=0};var I=function(){this.proprieta_mutuo_id=0,this.detrazione_interessi="",this.tipo_tasso="",this.euribor_id=0,this.descrizione_euribor="",this.spread=0,this.rate_id=0,this.descrizione_rate="",this.numero_rate=0,this.durata=0,this.data_inizio="",this.importo_iniziale=0};var C=function(){this.proprieta_affitto_id=0,this.tipo_affittuario_id=0,this.descrizione_affittuario="",this.spese_condominiali=!1,this.importo_spese_condominiali=0,this.cedolare_secca=!1,this.aliquota_cedolare=0,this.prima_scadenza_anni=0,this.data_inizio="",this.importo_mensile=0};var D=function(){function t(t,e){this.storeService=t,this.immobiliService=e,this.elencoImmobiliSubject=new r.Subject,this.elencoImmobiliObs=this.elencoImmobiliSubject.asObservable(),this.userDataSubject=new r.Subject,this.userDataObservable=this.userDataSubject.asObservable(),this.userData=new g,this.connection=new S,this.cliente=new d,this.immobiliCliente=new Array,this.immobile=new v,this.immobile.dati_catastali=new y,this.immobile.spese=new Array,this.immobile.omi=new _,this.immobile.mutuo_dettaglio=new I,this.immobile.affitto_dettaglio=new C,this.immobile.tasse=new Array,this.immobile.cointestatari=new Array,this.intestazionePagina="Readvice",this.paginaPrecedente="home"}return t.prototype.setPaginaPrecedente=function(t){this.paginaPrecedente=t},t.prototype.getPaginaPrecedente=function(){return this.paginaPrecedente},t.prototype.setIntestazionePagina=function(t){this.intestazionePagina=t},t.prototype.getIntestazionePagina=function(){return this.intestazionePagina},t.prototype.setCliente=function(t){var e=this;this.cliente=t,this.immobiliService.getImmobili(this.cliente.cliente_id+"").subscribe(function(t){t.Success&&(e.immobiliCliente=t.Data.elenco_immobili,console.log("caricati gli immobili del cliente: "+e.immobiliCliente.length),e.elencoImmobiliSubject.next(!0))})},t.prototype.clearUserData=function(){this.storeService.clearUserData(),this.userData=new g},t.prototype.setUserData=function(t){return this.userData=t,null==t?-1:(this.storeService.setUserData(t),1)},t.prototype.getUserData=function(){return this.userData},t.prototype.loadUserData=function(){var t=this;null!==this.userData&&void 0!==this.userData&&""===this.userData.token_value?this.userDataSubject.next(!0):this.storeService.getUserDataPromise().then(function(e){null==e?t.userDataSubject.next(!1):(t.userData=e,t.userDataSubject.next(!0))})},t.prototype.getCliente=function(){return this.cliente},t.prototype.clearCliente=function(){this.cliente=new d,this.immobiliCliente=new Array},t.prototype.getImmobiliCliente=function(){return this.immobiliCliente},t.prototype.setImmobileDettaglio=function(t){this.immobile=t},t.prototype.getImmobileDettaglio=function(){return this.immobile},t.prototype.clearImmobileDettaglio=function(){this.immobile=null},t.prototype.setConnection=function(t){this.connection=t},t.prototype.getConnection=function(){return this.connection},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:f},{type:b}]},t}();var A=function(){function t(t,e,i){this.alertController=t,this.sessionService=e,this.router=i}return t.prototype.presentAlert=function(t){return c(this,void 0,void 0,function(){return l(this,function(e){return this.alertController.create({header:"Conferma",message:t,buttons:["OK"]}).then(function(t){t.present()}),[2]})})},t.prototype.presentErrorAlert=function(t){return c(this,void 0,void 0,function(){return l(this,function(e){return this.alertController.create({header:"Errore",message:t,buttons:["CHIUDI"]}).then(function(t){t.present()}),[2]})})},t.prototype.presentAlertLogout=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(e){return this.alertController.create({header:"Logout",message:"Sicuro di voler uscire?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){console.log("Confirm Cancel: blah")}},{text:"Si",handler:function(){t.sessionService.clearUserData(),t.router.navigate(["login"])}}]}).then(function(t){t.present()}),[2]})})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.AlertController},{type:D},{type:a.Router}]},t}();var w=function(){function t(t,e,i,o,n){this.injector=t,this.zone=e,this.logErroriService=i,this.alertService=o,this.sessionService=n}return t.prototype.handleError=function(t){var e=this,i=this.sessionService.getUserData().token_value;console.log("gestisco un errore");var o=new h;o.token=i,o.log_stacktrace=JSON.stringify(t),o.log_descrerr=t.message,o.log_metodoerr="",o.log_link="",o.log_query="",o.username="",this.logErroriService.postErrore(o).subscribe(function(i){console.log("errore trasmesso: "+o),e.alertService.presentErrorAlert("Errore "+t.message+" trasmesso al server")}),console.log("gestione errore completata")},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:e.NgZone},{type:m},{type:A},{type:D}]},t}();var z=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getClienti=function(){return this.httpService.get(this.constants.getClientiServiceName)},t.prototype.putCliente=function(t){return this.httpService.post(this.constants.putClientiServiceName,t)},t.prototype.abilitaAppCliente=function(t){return this.httpService.post(this.constants.abilitaAppClienteServiceName,t)},t.prototype.getBookValue=function(t){return this.httpService.get(this.constants.bookValueServiceName+this.constants.pathSeparator+t)},t.prototype.getPianoAmmortamento=function(t){return this.httpService.get(this.constants.pianoAmmortamentoServiceName+this.constants.pathSeparator+t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u},{type:p}]},t}();var P=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getTipologieTasse=function(t,e,i){return this.getDropdown(this.constants.getDdlTasse,this.constants.pathSeparator+this.getBooleanAsString(t)+this.constants.pathSeparator+this.getBooleanAsString(e)+this.constants.pathSeparator+this.getBooleanAsString(i))},t.prototype.getTipiAffittuari=function(){return this.getDropdown(this.constants.getDdlAffittuari,"")},t.prototype.getEuribor=function(){return this.getDropdown(this.constants.getDdlEuribor,"")},t.prototype.getTipiOmi=function(t){return this.getDropdown(this.constants.getDdlOmi,this.constants.pathSeparator+t)},t.prototype.getTipologieCatastali=function(){return this.getDropdown(this.constants.getDdlTipologiaCatastale,"")},t.prototype.getDropdown=function(t,e){var i=t+e;return this.httpService.get(i)},t.prototype.getBooleanAsString=function(t){return t?"true":"false"},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u},{type:p}]},t}();var N=function(){function t(t){this.constants=t,this.tipologiaVilla=["A/1","A/7","A/8","A/9"],this.tipologiaCasa=["A/2","A/3","A/4","A/5","A/11"],this.tipologiaAgricolo=["A/6","D/10"],this.tipologiaUfficio=["A/10","C/3","E/3","E/4","E/6","E/8","E/9","F/1","F/2"],this.tipologiaAlbergo=["B/1","B/3","C/5","D/2"],this.tipologiaOspedale=["B/2","D/4"],this.tipologiaScuola=["B/5"],this.tipologiaMuseo=["B/6"],this.tipologiaChiesa=["B/7","E/7"],this.tipologiaMagazzino=["B/8","C/2","E/5","F/5"],this.tipologiaNegozio=["C/1","D/8"],this.tipologiaSport=["C/4","D/6"],this.tipologiaGarage=["C/6","C/7"],this.tipologiaFabbrica=["D/1","D/7"],this.tipologiaTeatro=["D/3"],this.tipologiaBanca=["D/5"],this.tipologiaPonte=["D/9","E/2"],this.tipologiaStazione=["E/1"],this.tipologiaCantiere=["F/3","F/4","F/6"]}return t.prototype.getClasseIcona=function(t){return this.tipologiaAgricolo.includes(t)?this.constants.tipologiaImmobileAgricolo:this.tipologiaAlbergo.includes(t)?this.constants.tipologiaImmobileAlbergo:this.tipologiaBanca.includes(t)?this.constants.tipologiaImmobileBanca:this.tipologiaCantiere.includes(t)?this.constants.tipologiaImmobileCantiere:this.tipologiaCasa.includes(t)?this.constants.tipologiaImmobileCasa:this.tipologiaChiesa.includes(t)?this.constants.tipologiaImmobileChiesa:this.tipologiaFabbrica.includes(t)?this.constants.tipologiaImmobileFabbrica:this.tipologiaGarage.includes(t)?this.constants.tipologiaImmobileGarage:this.tipologiaMagazzino.includes(t)?this.constants.tipologiaImmobileMagazzino:this.tipologiaMuseo.includes(t)?this.constants.tipologiaImmobileMuseo:this.tipologiaNegozio.includes(t)?this.constants.tipologiaImmobileNegozio:this.tipologiaOspedale.includes(t)?this.constants.tipologiaImmobileOspedale:this.tipologiaPonte.includes(t)?this.constants.tipologiaImmobilePonte:this.tipologiaScuola.includes(t)?this.constants.tipologiaImmobileScuola:this.tipologiaSport.includes(t)?this.constants.tipologiaImmobileSport:this.tipologiaStazione.includes(t)?this.constants.tipologiaImmobileStazione:this.tipologiaTeatro.includes(t)?this.constants.tipologiaImmobileTeatro:this.tipologiaUfficio.includes(t)?this.constants.tipologiaImmobileUfficio:this.tipologiaVilla.includes(t)?this.constants.tipologiaImmobileVilla:this.constants.tipologiaImmobileCasa},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p}]},t}();var E=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:e.NgModule,args:[{declarations:[],imports:[i.HttpClientModule,n.IonicStorageModule.forRoot()],providers:[p,u,b,z,P,m,w,N],exports:[]}]}],t}(),j=function(){function t(t,e){this.httpService=t,this.constants=e}return t.prototype.getSituazioneGenerale=function(t){return this.httpService.get(this.constants.situazioneGeneraleServiceName+this.constants.pathSeparator+t)},t.prototype.getGrafici=function(t){return this.httpService.get(this.constants.graficiServiceName+this.constants.pathSeparator+t)},t.prototype.getPdfReport=function(t){return this.httpService.get(this.constants.pdfReportServiceName+this.constants.pathSeparator+t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u},{type:p}]},t}();var k=function(){function t(t,e,i){this.httpService=t,this.storeService=e,this.constants=i}return t.prototype.CambioPassword=function(t){return this.httpService.post(this.constants.cambioPasswordServiceName,t)},t.prototype.Login=function(t){return this.httpService.postNoToken(this.constants.loginServiceName,t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:u},{type:f},{type:p}]},t}();var U=function(){};var T=function(){};var R=function(){};var O=function(){};var B=function(){};var x=function(){};var G=function(){};var M=function(){};var q=function(){};var L=function(){};var F=function(){};var H=function(){};var V=function(){};var K=function(){};var Y=function(){};var J=function(){this.proprieta_possesso_id=0,this.nominativo="",this.codice_fiscale="",this.quota=0};var W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(v);var Z=function(){};var Q=function(){this.proprieta_spese_id=0,this.descrizione_spesa="",this.importo_annuale=0};var X=function(){this.proprieta_tasse_id=0,this.descrizione_tassa="",this.importo_annuale=0};var $=function(){};var tt=function(){};var et=function(){};var it=function(){};var ot=function(){};var nt=function(){};var rt=function(){};t.AbilitaAppClienteRequest=L,t.AffittoDettaglio=C,t.AlertService=A,t.AnnoPianoAmmortamento=tt,t.BookValue=F,t.BrokerLibModule=E,t.CambioPasswordRequest=ot,t.CancellazioneImmobileRequest=Y,t.Cliente=d,t.ClientiService=z,t.CointestatarioDettaglio=J,t.Connection=S,t.DatiCatastaliDettaglio=y,t.DdlItem=rt,t.DropdownService=P,t.ErrorHandlerService=w,t.ErrorMessage=nt,t.Grafici=U,t.GraficiAffittuario=T,t.GraficiAndamentoAnnuale=R,t.GraficiConcentrazione=O,t.GraficiIndicatore=B,t.IconeService=N,t.Immobile=K,t.ImmobileDettaglio=v,t.ImmobileDettaglioVM=W,t.ImmobiliService=b,t.InserimentoClienteRequest=H,t.InserimentoClienteResponse=V,t.InserimentoImmobileResponse=Z,t.LogErroriService=m,t.LoginRequest=et,t.LoginService=k,t.MutuoDettaglio=I,t.OmiDettaglio=_,t.PianoAmmortamento=$,t.ReportGenerale=x,t.ReportGeneraleAttivo=G,t.ReportGeneraleOggettoColonna=q,t.ReportGeneralePassivo=M,t.ReportService=j,t.SessionService=D,t.SpesaDettaglio=Q,t.StoreService=f,t.TassaDettaglio=X,t.Utente=it,t.WsLogErrore=h,t.WsToken=g,t.ɵa=p,t.ɵb=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=broker-lib.umd.min.js.map